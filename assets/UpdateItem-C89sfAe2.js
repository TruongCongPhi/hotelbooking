import{as as E,ar as D,aq as I,aR as L,a as h,ah as e}from"./index-CIj5hYV2.js";import{P as $}from"./index-qRxrIp-c.js";import{ab as x,B as F,V as b,ac as P,F as w}from"./IdurarOs-WAmMcj9g.js";import{e as g}from"./actions-CYbjwKLg.js";import{s as j}from"./index-KrFx5yLV.js";import{e as O}from"./selectors-BejxoUSi.js";import{C as S}from"./CloseCircleOutlined-BOwqTg4r.js";import{P as U}from"./PlusOutlined-CWCq2ylO.js";function B({form:d,translate:m}){const o=()=>{d.submit()};return e.jsx(F,{onClick:o,type:"primary",icon:e.jsx(U,{}),children:m("Cáº­p nháº­t")})}function J({config:d,UpdateForm:m}){const o=w();let{entity:n}=d;const p=E(),l=D(),{current:c,isLoading:C,isSuccess:f}=I(O),[a]=x.useForm(),{id:u}=L(),y=t=>{console.log("ðŸš€ ~ fieldsValue:",t);const i=new FormData;Object.entries(t).forEach(([s,r])=>{s!=="files"&&r!==void 0&&r!=="undefined"&&r!==null&&r!=="null"&&(Array.isArray(r)&&(s==="amenityIds"||s==="serviceIds"||s==="deleteImageIds")?r.forEach(A=>{i.append(s,A)}):i.append(s,r))}),t.files&&Array.isArray(t.files)&&t.files.filter(s=>s).forEach(s=>{i.append("files",s.originFileObj||s)}),console.log("ðŸš€ FormData gá»­i Ä‘i:",Array.from(i.entries())),p(g.updateAndUpload({entity:n,id:u,formDataa:i}))};return h.useEffect(()=>{f&&(a.resetFields(),p(g.resetAction({actionType:"update"})),l(`/${n.toLowerCase()}/read/${u}`))},[f]),h.useEffect(()=>{if(c){let t={...c};a.resetFields(),a.setFieldsValue(t)}},[c]),e.jsxs(e.Fragment,{children:[e.jsx($,{onBack:()=>{l(`/${n.toLowerCase()}`)},title:o("Cáº­p nháº­t"),ghost:!1,extra:[e.jsx(F,{onClick:()=>{l(`/${n.toLowerCase()}`)},icon:e.jsx(S,{}),children:o("Há»§y")},`${j.generate()}`),e.jsx(B,{translate:o,form:a},`${j.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(b,{dashed:!0}),e.jsx(P,{isLoading:C,children:e.jsx(x,{form:a,layout:"vertical",onFinish:y,children:e.jsx(m,{current:c,form:a})})})]})}export{J as U};
