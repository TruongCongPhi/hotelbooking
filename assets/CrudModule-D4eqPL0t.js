import{aq as L,ag as G,as as R,a as v,ah as e}from"./index-C5Hw-WH9.js";import{c as x}from"./actions-CrR1ioDX.js";import{u as j,C as ie}from"./index-BAO1k-cZ.js";import{ab as P,ac as Q,B as F,F as O,D as $,aa as te,C as ne,W as Y,Q as I,ad as re,I as se,J as X,a9 as ue,L as ce}from"./IdurarOs-DZCQDfqB.js";import{d as w}from"./dayjs.min-Fgjaem5U.js";import{v as ee,R as de}from"./helpers-Dwjkb3vG.js";import{M as me}from"./index-BaSkYAwT.js";import{s as q}from"./index-KrFx5yLV.js";import{S as be}from"./index-BEqAyS9P.js";import{T}from"./index-CjUhIO3m.js";import{u as ve,e as pe,D as Ae,E as he,f as ge}from"./ErpApp-luviQjv1.js";import{u as xe}from"./useDebounce-D3qm_pF7.js";import{S as W,E as fe}from"./index-D8iAfrlz.js";import{P as Be}from"./index-DjRnzsJr.js";import{u as Ce}from"./useMoney-wZwEAtmr.js";import{D as ae}from"./DeleteOutlined-Cx6e6mO4.js";import{A as Se}from"./ArrowLeftOutlined-CGiPZklH.js";import{F as Ze}from"./Table-87euyClI.js";import{P as ye}from"./PlusOutlined-Dpzt2bhY.js";function Ee(){return ve()}const De={useBreakpoint:Ee},je=[{label:"Afghanistan",value:"AF",timeZone:["Asia/Kabul"]},{label:"Albania",value:"AL",timeZone:["Europe/Tirane"]},{label:"Algeria",value:"DZ",timeZone:["Africa/Algiers"]},{label:"Andorra",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Argentina",value:"AR",timeZone:["America/Argentina/Buenos_Aires","America/Argentina/Cordoba","America/Argentina/Salta","America/Argentina/Jujuy","America/Argentina/Tucuman","America/Argentina/Catamarca","America/Argentina/La_Rioja","America/Argentina/San_Juan","America/Argentina/Mendoza","America/Argentina/San_Luis","America/Argentina/Rio_Gallegos","America/Argentina/Ushuaia"]},{label:"Armenia",value:"AM",timeZone:["Asia/Yerevan"]},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU",timeZone:["Australia/Lord_Howe","Antarctica/Macquarie","Australia/Hobart","Australia/Currie","Australia/Melbourne","Australia/Sydney","Australia/Broken_Hill","Australia/Brisbane","Australia/Lindeman","Australia/Adelaide","Australia/Darwin","Australia/Perth","Australia/Eucla"]},{label:"Austria",value:"AT",timeZone:["Europe/Vienna"]},{label:"Azerbaijan",value:"AZ",timeZone:["Asia/Baku"]},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH",timeZone:["Asia/Bahrain"]},{label:"Bangladesh",value:"BD",timeZone:["Asia/Dhaka"]},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY",timeZone:["Europe/Minsk"]},{label:"Belgium",value:"BE",timeZone:["Europe/Brussels"]},{label:"Belize",value:"BZ",timeZone:["America/Belize"]},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT",timeZone:["Asia/Thimphu"]},{label:"Bolivia",value:"BO",timeZone:["America/La_Paz"]},{label:"Bosnia and Herzegovina",value:"BA",timeZone:["Europe/Sarajevo"]},{label:"Botswana",value:"BW",timeZone:["Africa/Gaborone"]},{label:"Brazil",value:"BR",timeZone:["America/Noronha","America/Belem","America/Fortaleza","America/Recife","America/Araguaina","America/Maceio","America/Bahia","America/Sao_Paulo","America/Campo_Grande","America/Cuiaba","America/Santarem","America/Porto_Velho","America/Boa_Vista","America/Manaus","America/Eirunepe","America/Rio_Branco"]},{label:"Brunei Darussalam",value:"BN",timeZone:["Asia/Brunei"]},{label:"Bulgaria",value:"BG",timeZone:["Europe/Sofia"]},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cabo Verde",value:"CV"},{label:"Cambodia",value:"KH",timeZone:["Asia/Phnom_Penh"]},{label:"Cameroon",value:"CM",timeZone:["Africa/Douala"]},{label:"Canada",value:"CA",timeZone:["America/St_Johns","America/Halifax","America/Glace_Bay","America/Moncton","America/Goose_Bay","America/Blanc-Sablon","America/Toronto","America/Nipigon","America/Thunder_Bay","America/Iqaluit","America/Pangnirtung","America/Atikokan","America/Winnipeg","America/Rainy_River","America/Resolute","America/Rankin_Inlet","America/Regina","America/Swift_Current","America/Edmonton","America/Cambridge_Bay","America/Yellowknife","America/Inuvik","America/Creston","America/Dawson_Creek","America/Fort_Nelson","America/Vancouver","America/Whitehorse","America/Dawson"]},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL",timeZone:["America/Santiago","Pacific/Easter"]},{label:"China",value:"CN",timeZone:["Asia/Shanghai","Asia/Urumqi"]},{label:"Colombia",value:"CO",timeZone:["America/Bogota"]},{label:"Comoros",value:"KM"},{label:"Congo",value:"CD",timeZone:["Africa/Kinshasa","Africa/Lubumbashi"]},{label:"Congo",value:"CG"},{label:"Costa Rica",value:"CR",timeZone:["America/Costa_Rica"]},{label:"Croatia",value:"HR",timeZone:["Europe/Zagreb"]},{label:"Cuba",value:"CU",timeZone:["America/Havana"]},{label:"Cyprus",value:"CY"},{label:"Czechia",value:"CZ",timeZone:["Europe/Prague"]},{label:"Cote d Ivoire",value:"CI",timeZone:["Africa/Abidjan"]},{label:"Denmark",value:"DK",timeZone:["Europe/Copenhagen"]},{label:"Djibouti",value:"DJ",timeZone:["Africa/Djibouti"]},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO",timeZone:["America/Santo_Domingo"]},{label:"Ecuador",value:"EC",timeZone:["America/Guayaquil","Pacific/Galapagos"]},{label:"Egypt",value:"EG",timeZone:["Africa/Cairo"]},{label:"El Salvador",value:"SV",timeZone:["America/El_Salvador"]},{label:"Eritrea",value:"ER",timeZone:["Africa/Asmara"]},{label:"Estonia",value:"EE",timeZone:["Europe/Tallinn"]},{label:"Eswatini",value:"SZ"},{label:"Ethiopia",value:"ET",timeZone:["Africa/Addis_Ababa"]},{label:"Fiji",value:"FJ"},{label:"Finland",value:"FI",timeZone:["Europe/Helsinki"]},{label:"France",value:"FR",timeZone:["Europe/Paris"]},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE",timeZone:["Asia/Tbilisi"]},{label:"Germany",value:"DE",timeZone:["Europe/Berlin","Europe/Busingen"]},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR",timeZone:["Europe/Athens"]},{label:"Greenland",value:"GL",timeZone:["America/Godthab","America/Danmarkshavn","America/Scoresbysund","America/Thule"]},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT",timeZone:["America/Guatemala"]},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT",timeZone:["America/Port-au-Prince"]},{label:"Honduras",value:"HN",timeZone:["America/Tegucigalpa"]},{label:"Hong Kong",value:"HK",timeZone:["Asia/Hong_Kong"]},{label:"Hungary",value:"HU",timeZone:["Europe/Budapest"]},{label:"Iceland",value:"IS",timeZone:["Atlantic/Reykjavik"]},{value:"IN",label:"India",timeZone:["Asia/Kolkata"]},{value:"ID",label:"Indonesia",timeZone:["Asia/Jakarta","Asia/Pontianak","Asia/Makassar","Asia/Jayapura"]},{value:"IR",label:"Iran",timeZone:["Asia/Tehran"]},{value:"IQ",label:"Iraq",timeZone:["Asia/Baghdad"]},{value:"IE",label:"Ireland",timeZone:["Europe/Dublin"]},{value:"IL",label:"Israel",timeZone:["Asia/Jerusalem"]},{value:"IT",label:"Italy",timeZone:["Europe/Rome"]},{value:"JM",label:"Jamaica",timeZone:["America/Jamaica"]},{value:"JP",label:"Japan",timeZone:["Asia/Tokyo"]},{value:"JO",label:"Jordan",timeZone:["Asia/Amman"]},{value:"KZ",label:"Kazakhstan",timeZone:["Asia/Almaty","Asia/Qyzylorda","Asia/Aqtobe","Asia/Aqtau","Asia/Oral"]},{value:"KE",label:"Kenya",timeZone:["Africa/Nairobi"]},{value:"KP",label:"Korea"},{value:"KR",label:"Korea",timeZone:["Asia/Seoul"]},{value:"KW",label:"Kuwait",timeZone:["Asia/Kuwait"]},{value:"KG",label:"Kyrgyzstan",timeZone:["Asia/Bishkek"]},{value:"LV",label:"Latvia",timeZone:["Europe/Riga"]},{value:"LB",label:"Lebanon",timeZone:["Asia/Beirut"]},{value:"LS",label:"Lesotho"},{value:"LR",label:"Liberia"},{value:"LY",label:"Libya",timeZone:["Africa/Tripoli"]},{value:"LI",label:"Liechtenstein",timeZone:["Europe/Vaduz"]},{value:"LT",label:"Lithuania",timeZone:["Europe/Vilnius"]},{value:"LU",label:"Luxembourg",timeZone:["Europe/Luxembourg"]},{value:"MG",label:"Madagascar"},{value:"MW",label:"Malawi"},{value:"MY",label:"Malaysia",timeZone:["Asia/Kuala_Lumpur","Asia/Kuching"]},{value:"MV",label:"Maldives",timeZone:["Indian/Maldives"]},{value:"ML",label:"Mali",timeZone:["Africa/Bamako"]},{value:"MT",label:"Malta",timeZone:["Europe/Malta"]},{value:"MQ",label:"Martinique"},{value:"MR",label:"Mauritania"},{value:"MU",label:"Mauritius"},{value:"MX",label:"Mexico",timeZone:["America/Mexico_City","America/Cancun","America/Merida","America/Monterrey","America/Matamoros","America/Mazatlan","America/Chihuahua","America/Ojinaga","America/Hermosillo","America/Tijuana","America/Bahia_Banderas"]},{value:"MD",label:"Moldova",timeZone:["Europe/Chisinau"]},{value:"MC",label:"Monaco",timeZone:["Europe/Monaco"]},{value:"MN",label:"Mongolia",timeZone:["Asia/Ulaanbaatar","Asia/Hovd","Asia/Choibalsan"]},{value:"ME",label:"Montenegro",timeZone:["Europe/Podgorica"]},{value:"MS",label:"Montserrat"},{value:"MA",label:"Morocco",timeZone:["Africa/Casablanca"]},{value:"MZ",label:"Mozambique"},{value:"MM",label:"Myanmar",timeZone:["Asia/Rangoon"]},{value:"NA",label:"Namibia"},{value:"NP",label:"Nepal",timeZone:["Asia/Kathmandu"]},{value:"NL",label:"Netherlands",timeZone:["Europe/Amsterdam"]},{value:"NC",label:"New Caledonia"},{value:"NZ",label:"New Zealand",timeZone:["Pacific/Auckland","Pacific/Chatham"]},{value:"NI",label:"Nicaragua",timeZone:["America/Managua"]},{value:"NE",label:"Niger"},{value:"NG",label:"Nigeria",timeZone:["Africa/Lagos"]},{value:"NO",label:"Norway",timeZone:["Europe/Oslo"]},{value:"OM",label:"Oman",timeZone:["Asia/Muscat"]},{value:"PK",label:"Pakistan",timeZone:["Asia/Karachi"]},{value:"PS",label:"Palestine"},{value:"PA",label:"Panama",timeZone:["America/Panama"]},{value:"PG",label:"Papua New Guinea"},{value:"PY",label:"Paraguay",timeZone:["America/Asuncion"]},{value:"PE",label:"Peru",timeZone:["America/Lima"]},{value:"PH",label:"Philippines",timeZone:["Asia/Manila"]},{value:"PL",label:"Poland",timeZone:["Europe/Warsaw"]},{value:"PT",label:"Portugal",timeZone:["Europe/Lisbon","Atlantic/Madeira","Atlantic/Azores"]},{value:"PR",label:"Puerto Rico",timeZone:["America/Puerto_Rico"]},{value:"QA",label:"Qatar",timeZone:["Asia/Qatar"]},{value:"MK",label:"Macedonia",timeZone:["Europe/Skopje"]},{value:"RO",label:"Romania",timeZone:["Europe/Bucharest"]},{value:"RU",label:"Russia",timeZone:["Europe/Kaliningrad","Europe/Moscow","Europe/Simferopol","Europe/Volgograd","Europe/Astrakhan","Europe/Samara","Europe/Ulyanovsk","Asia/Yekaterinburg","Asia/Omsk","Asia/Novosibirsk","Asia/Barnaul","Asia/Novokuznetsk","Asia/Krasnoyarsk","Asia/Irkutsk","Asia/Chita","Asia/Yakutsk","Asia/Khandyga","Asia/Vladivostok","Asia/Ust-Nera","Asia/Magadan","Asia/Sakhalin","Asia/Srednekolymsk","Asia/Kamchatka","Asia/Anadyr"]},{value:"RW",label:"Rwanda",timeZone:["Africa/Kigali"]},{value:"RE",label:"Réunion",timeZone:["Indian/Reunion"]},{value:"SA",label:"Saudi Arabia",timeZone:["Asia/Riyadh"]},{value:"SN",label:"Senegal",timeZone:["Africa/Dakar"]},{value:"RS",label:"Serbia",timeZone:["Europe/Belgrade"]},{value:"SG",label:"Singapore",timeZone:["Asia/Singapore"]},{value:"SK",label:"Slovakia",timeZone:["Europe/Bratislava"]},{value:"SI",label:"Slovenia",timeZone:["Europe/Ljubljana"]},{value:"SO",label:"Somalia",timeZone:["Africa/Mogadishu"]},{value:"ZA",label:"South Africa",timeZone:["Africa/Johannesburg"]},{value:"SS",label:"South Sudan"},{value:"ES",label:"Spain",timeZone:["Europe/Madrid","Africa/Ceuta","Atlantic/Canary"]},{value:"LK",label:"Sri Lanka",timeZone:["Asia/Colombo"]},{value:"SD",label:"Sudan"},{value:"SR",label:"Suriname"},{value:"SE",label:"Sweden",timeZone:["Europe/Stockholm"]},{value:"CH",label:"Switzerland",timeZone:["Europe/Zurich"]},{value:"SY",label:"Syria",timeZone:["Asia/Damascus"]},{value:"TW",label:"Taiwan",timeZone:["Asia/Taipei"]},{value:"TJ",label:"Tajikistan",timeZone:["Asia/Dushanbe"]},{value:"TZ",label:"Tanzania"},{value:"TH",label:"Thailand",timeZone:["Asia/Bangkok"]},{value:"TL",label:"Timor-Leste"},{value:"TG",label:"Togo"},{value:"TO",label:"Tonga"},{value:"TN",label:"Tunisia",timeZone:["Africa/Tunis"]},{value:"TR",label:"Turkey",timeZone:["Europe/Istanbul"]},{value:"TM",label:"Turkmenistan",timeZone:["Asia/Ashgabat"]},{value:"UG",label:"Uganda"},{value:"UA",label:"Ukraine",timeZone:["Europe/Kiev","Europe/Uzhgorod","Europe/Zaporozhye"]},{value:"AE",label:"United Arab Emirates",timeZone:["Asia/Dubai"]},{value:"GB",label:"United Kingdom",timeZone:["Europe/London"]},{value:"US",label:"United States",timeZone:["America/New_York","America/Detroit","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Indiana/Indianapolis","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Chicago","America/Indiana/Tell_City","America/Indiana/Knox","America/Menominee","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/North_Dakota/Beulah","America/Denver","America/Boise","America/Phoenix","America/Los_Angeles","America/Anchorage","America/Juneau","America/Sitka","America/Metlakatla","America/Yakutat","America/Nome","America/Adak","Pacific/Honolulu"]},{value:"UY",label:"Uruguay",timeZone:["America/Montevideo"]},{value:"UZ",label:"Uzbekistan",timeZone:["Asia/Samarkand","Asia/Tashkent"]},{value:"VE",label:"Venezuela",timeZone:["America/Caracas"]},{value:"VN",label:"Vietnam",timeZone:["Asia/Ho_Chi_Minh"]},{value:"YE",label:"Yemen",timeZone:["Asia/Aden"]},{value:"ZM",label:"Zambia"},{value:"ZW",label:"Zimbabwe",timeZone:["Africa/Harare"]}],le=()=>{const o=L(pe);return{dateFormat:(o==null?void 0:o.idurar_app_date_format)??"DD/MM/YYYY"}},N=o=>o.crud,oe=G([N],o=>o.current),ke=G([N],o=>o.list),Me=G([N],o=>o.create),Te=G([N],o=>o.update);G([N],o=>o.read);const Ie=G([N],o=>o.delete),Fe=G([N],o=>o.search);function Le({config:o,formElements:l,withUpload:s=!1}){let{entity:r}=o;const u=R(),{isLoading:i,isSuccess:a}=L(Me),{crudContextAction:d}=j(),{panel:f,collapsedBox:B,readBox:C}=d,[m]=P.useForm(),t=O(),n=c=>{if(c.file&&s){const p=new FormData;Object.keys(c).forEach(A=>{A==="file"?p.append(A,c.file[0].originFileObj):p.append(A,c[A])}),console.log("Tạo mới có upload: ",p),u(x.create({entity:r,formData:p,withUpload:!0}))}else{const p=Object.keys(c).reduce((A,h)=>(A[h]=typeof c[h]=="string"?c[h].trim():c[h],A),{});console.log("Tạo mới không upload: ",p),u(x.create({entity:r,jsonData:p,withUpload:!1}))}};return v.useEffect(()=>{a&&(C.open(),B.open(),f.open(),m.resetFields(),u(x.resetAction({actionType:"create"})),u(x.list({entity:r})))},[a]),e.jsx(Q,{isLoading:i,children:e.jsxs(P,{form:m,layout:"vertical",onFinish:n,children:[l,e.jsx(P.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",children:t("Xác nhận")})})]})})}function we({config:o,formElements:l,withUpload:s=!1}){let{entity:r}=o;const u=O(),i=R(),{current:a,isLoading:d,isSuccess:f}=L(Te),{state:B,crudContextAction:C}=j(),{panel:m,collapsedBox:t,readBox:n}=C,c=()=>{n.open()},[p]=P.useForm(),A=b=>{const k=a.id;b.file&&s&&(b.file=b.file[0].originFileObj),console.log(b),i(x.update({entity:r,id:k,jsonData:b,withUpload:s}))};v.useEffect(()=>{if(a){let b={...a};b.birthday&&(b={...b,birthday:w(b.birthday).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),b.date&&(b={...b,date:w(b.date).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),b.expiredDate&&(b={...b,expiredDate:w(b.expiredDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),b.created&&(b={...b,created:w(b.created).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),b.updated&&(b={...b,updated:w(b.updated).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),p.resetFields(),p.setFieldsValue(b)}},[a]),v.useEffect(()=>{f&&(n.open(),t.open(),m.open(),p.resetFields(),i(x.resetAction({actionType:"update"})),i(x.list({entity:r})))},[f]);const{isEditBoxOpen:h}=B,Z=h?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{style:Z,children:e.jsx(Q,{isLoading:d,children:e.jsxs(P,{form:p,layout:"vertical",onFinish:A,children:[l,e.jsx(P.Item,{style:{display:"inline-block",paddingRight:"5px"},children:e.jsx(F,{type:"primary",htmlType:"submit",children:u("Lưu")})}),e.jsx(P.Item,{style:{display:"inline-block",paddingLeft:"5px"},children:e.jsx(F,{onClick:c,children:u("Hủy")})})]})})})}function Pe({config:o}){const l=O();let{entity:s,deleteModalLabels:r,deleteMessage:u=l("Bạn có chắc chắn muốn xóa:"),modalTitle:i=l("Xác nhận xóa")}=o;const a=R(),{current:d,isLoading:f,isSuccess:B}=L(Ie),{state:C,crudContextAction:m}=j(),{appContextAction:t}=$(),{panel:n,readBox:c}=m,{navMenu:p}=t,{isModalOpen:A}=C,{modal:h}=m,[Z,b]=v.useState("");v.useEffect(()=>{if(B&&(console.log("🚀 ~ useEffect ~ DeleteModal isSuccess:",B),h.close(),a(x.list({entity:s}))),d){let M=r.map(H=>ee(d,H)).join(" ");b(M)}},[B,d]);const k=()=>{const M=d.id;a(x.delete({entity:s,id:M})),c.close(),h.close(),n.close(),p.collapse()},y=()=>{f||h.close()};return e.jsx(me,{title:i,open:A,onOk:k,onCancel:y,confirmLoading:f,footer:[e.jsx(F,{onClick:y,children:"Hủy"},"back"),e.jsx(F,{type:"primary",onClick:k,children:"Đồng ý"},"submit")],children:e.jsxs("p",{children:[u,e.jsxs("span",{children:[" ",Z]})]})})}const Ge=[{value:"default",label:"default"},{value:"magenta",label:"magenta",color:"magenta"},{value:"red",label:"red",color:"red"},{value:"volcano",label:"volcano",color:"volcano"},{value:"orange",label:"orange",color:"orange"},{value:"gold",label:"gold",color:"gold"},{value:"lime",label:"lime",color:"lime"},{value:"green",label:"green",color:"green"},{value:"cyan",label:"cyan",color:"cyan"},{value:"blue",label:"blue",color:"blue"},{value:"geekblue",label:"geekblue",color:"geekblue"},{value:"purple",label:"purple",color:"purple"},{value:"indianred",label:"IndianRed",color:"#CD5C5C"},{value:"lightcoral",label:"LightCoral",color:"#F08080"},{value:"salmon",label:"Salmon",color:"#FA8072"},{value:"darksalmon",label:"DarkSalmon",color:"#E9967A"},{value:"lightsalmon",label:"LightSalmon",color:"#FFA07A"},{value:"crimson",label:"Crimson",color:"#DC143C"},{value:"firebrick",label:"FireBrick",color:"#B22222"},{value:"darkred",label:"DarkRed",color:"#8B0000"},{value:"pink",label:"Pink",color:"#FFC0CB"},{value:"lightpink",label:"LightPink",color:"#FFB6C1"},{value:"hotpink",label:"HotPink",color:"#FF69B4"},{value:"deeppink",label:"DeepPink",color:"#FF1493"},{value:"mediumvioletred",label:"MediumVioletRed",color:"#C71585"},{value:"palevioletred",label:"PaleVioletRed",color:"#DB7093"},{value:"lightsalmon",label:"LightSalmon",color:"#FFA07A"},{value:"coral",label:"Coral",color:"#FF7F50"},{value:"tomato",label:"Tomato",color:"#FF6347"},{value:"orangered",label:"OrangeRed",color:"#FF4500"},{value:"darkorange",label:"DarkOrange",color:"#FF8C00"},{value:"orange",label:"Orange",color:"#FFA500"},{value:"yellow",label:"yellow",color:"#FFD700"},{value:"gold",label:"Gold",color:"#FFC436"},{value:"khaki",label:"Khaki",color:"#cbcc9e"},{value:"darkkhaki",label:"DarkKhaki",color:"#BDB76B"},{value:"thistle",label:"Thistle",color:"#D8BFD8"},{value:"plum",label:"Plum",color:"#DDA0DD"},{value:"violet",label:"Violet",color:"#EE82EE"},{value:"orchid",label:"Orchid",color:"#DA70D6"},{value:"mediumorchid",label:"MediumOrchid",color:"#BA55D3"},{value:"mediumpurple",label:"MediumPurple",color:"#9370DB"},{value:"rebeccapurple",label:"RebeccaPurple",color:"#663399"},{value:"blueviolet",label:"BlueViolet",color:"#8A2BE2"},{value:"darkviolet",label:"DarkViolet",color:"#9400D3"},{value:"darkorchid",label:"DarkOrchid",color:"#9932CC"},{value:"darkmagenta",label:"DarkMagenta",color:"#8B008B"},{value:"purple",label:"Purple",color:"#800080"},{value:"indigo",label:"Indigo",color:"#4B0082"},{value:"slateblue",label:"SlateBlue",color:"#6A5ACD"},{value:"darkslateblue",label:"DarkSlateBlue",color:"#483D8B"},{value:"mediumslateblue",label:"MediumSlateBlue",color:"#7B68EE"},{value:"lightgreen",label:"LightGreen",color:"#90EE90"},{value:"mediumseagreen",label:"MediumSeaGreen",color:"#3CB371"},{value:"seagreen",label:"SeaGreen",color:"#2E8B57"},{value:"forestgreen",label:"ForestGreen",color:"#228B22"},{value:"green",label:"Green",color:"#008000"},{value:"darkgreen",label:"DarkGreen",color:"#006400"},{value:"yellowgreen",label:"YellowGreen",color:"#9ACD32"},{value:"olivedrab",label:"OliveDrab",color:"#6B8E23"},{value:"olive",label:"Olive",color:"#808000"},{value:"darkolivegreen",label:"DarkOliveGreen",color:"#556B2F"},{value:"mediumaquamarine",label:"MediumAquamarine",color:"#66CDAA"},{value:"darkseagreen",label:"DarkSeaGreen",color:"#8FBC8B"},{value:"lightseagreen",label:"LightSeaGreen",color:"#20B2AA"},{value:"darkcyan",label:"DarkCyan",color:"#008B8B"},{value:"teal",label:"Teal",color:"#008080"},{value:"turquoise",label:"Turquoise",color:"#40E0D0"},{value:"mediumturquoise",label:"MediumTurquoise",color:"#48D1CC"},{value:"darkturquoise",label:"DarkTurquoise",color:"#00CED1"},{value:"cadetblue",label:"CadetBlue",color:"#5F9EA0"},{value:"steelblue",label:"SteelBlue",color:"#4682B4"},{value:"lightsteelblue",label:"LightSteelBlue",color:"#B0C4DE"},{value:"powderblue",label:"PowderBlue",color:"#B0E0E6"},{value:"lightblue",label:"LightBlue",color:"#ADD8E6"},{value:"skyblue",label:"SkyBlue",color:"#87CEEB"},{value:"lightskyblue",label:"LightSkyBlue",color:"#87CEFA"},{value:"deepskyblue",label:"DeepSkyBlue",color:"#00BFFF"},{value:"dodgerblue",label:"DodgerBlue",color:"#1E90FF"},{value:"cornflowerblue",label:"CornflowerBlue",color:"#6495ED"},{value:"mediumslateblue",label:"MediumSlateBlue",color:"#7B68EE"},{value:"royalblue",label:"RoyalBlue",color:"#4169E1"},{value:"blue",label:"Blue",color:"#0000FF"},{value:"mediumblue",label:"MediumBlue",color:"#0000CD"},{value:"darkblue",label:"DarkBlue",color:"#00008B"},{value:"navy",label:"Navy",color:"#000080"},{value:"midnightblue",label:"MidnightBlue",color:"#191970"},{value:"burlywood",label:"BurlyWood",color:"#DEB887"},{value:"tan",label:"Tan",color:"#D2B48C"},{value:"rosybrown",label:"RosyBrown",color:"#BC8F8F"},{value:"sandybrown",label:"SandyBrown",color:"#F4A460"},{value:"goldenrod",label:"Goldenrod",color:"#DAA520"},{value:"darkgoldenrod",label:"DarkGoldenrod",color:"#B8860B"},{value:"peru",label:"Peru",color:"#CD853F"},{value:"chocolate",label:"Chocolate",color:"#D2691E"},{value:"saddlebrown",label:"SaddleBrown",color:"#8B4513"},{value:"sienna",label:"Sienna",color:"#A0522D"},{value:"brown",label:"Brown",color:"#A52A2A"},{value:"maroon",label:"Maroon",color:"#800000"},{value:"lightgray",label:"LightGray",color:"#D3D3D3"},{value:"silver",label:"Silver",color:"#C0C0C0"},{value:"darkgray",label:"DarkGray",color:"#A9A9A9"},{value:"gray",label:"Gray",color:"#808080"},{value:"dimgray",label:"DimGray",color:"#696969"},{value:"lightslategray",label:"LightSlateGray",color:"#778899"},{value:"slategray",label:"SlateGray",color:"#708090"},{value:"darkslategray",label:"DarkSlateGray",color:"#2F4F4F"},{value:"black",label:"Black",color:"#000000"}],Re=({fields:o,translate:l})=>{let s=[];return Object.keys(o).forEach(r=>{let u=o[r];s.push({title:u.label?u.label:r,dataIndex:u.dataIndex?u.dataIndex.join("."):r,isDate:u.type==="date"})}),s};function Ne({fields:o,translate:l,moneyFormatter:s,dateFormat:r}){let u=[];return Object.keys(o).forEach(i=>{let a=o[i];const d=a.dataIndex?a.dataIndex:[i],f={boolean:{title:a.label?l(a.label):l(i),dataIndex:d,onCell:()=>({props:{style:{width:"60px"}}}),render:(m,t)=>e.jsx(be,{checked:t[i],checkedChildren:e.jsx(te,{}),unCheckedChildren:e.jsx(ne,{})})},date:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{const n=w(t[i]).format(r);return e.jsx(T,{bordered:!1,color:a.color,children:n})}},currency:{title:a.label?l(a.label):l(i),dataIndex:d,onCell:()=>({style:{textAlign:"right",whiteSpace:"nowrap"}}),render:(m,t)=>s({amount:t[i],currency_code:t.currency})},async:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{var n;return e.jsx(T,{bordered:!1,color:a.color||((n=t[i])==null?void 0:n.color)||t.color,children:m})}},color:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{var n;return e.jsx(T,{bordered:!1,color:m,children:(n=Ge.find(c=>c.value===m))==null?void 0:n.label})}},stringWithColor:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>e.jsx(T,{bordered:!1,color:t.color||a.color,children:m})},tag:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>e.jsx(T,{bordered:!1,color:a.color,children:t[i]&&t[i]})},selectWithFeedback:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{if(a.renderAsTag){const n=a.options.find(c=>c.value===t[i]);return e.jsx(T,{bordered:!1,color:n==null?void 0:n.color,children:t[i]&&l(t[i])})}else return t[i]&&l(t[i])}},select:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{if(a.renderAsTag){const n=a.options.find(c=>c.value===t[i]);return e.jsx(T,{bordered:!1,color:n==null?void 0:n.color,children:t[i]&&t[i]})}else return t[i]&&t[i]}},selectWithTranslation:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{if(a.renderAsTag){const n=a.options.find(c=>c.value===t[i]);return e.jsx(T,{bordered:!1,color:n==null?void 0:n.color,children:t[i]&&l(t[i])})}else return t[i]&&l(t[i])}},array:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>t[i].map(n=>e.jsx(T,{bordered:!1,color:a.colors[n],children:n},`${q.generate()}`))},country:{title:a.label?l(a.label):l(i),dataIndex:d,render:(m,t)=>{const n=je.find(c=>c.value===t[i]);return e.jsxs(T,{bordered:!1,color:a.color||void 0,children:[(n==null?void 0:n.icon)&&(n==null?void 0:n.icon)+" ",(n==null?void 0:n.label)&&l(n.label)]})}},icon:{title:a.label?l(a.label):l(i),dataIndex:d,render:m=>e.jsx("span",{dangerouslySetInnerHTML:{__html:m},style:{display:"inline-block",verticalAlign:"middle",width:a.width||"24px",height:a.height||"24px"}})}},B={title:a.label?l(a.label):l(i),dataIndex:d},C=a.type;a.disableForTable||(Object.keys(f).includes(C)?u.push(f[C]):u.push(B))}),u}function _e({config:o}){const{dateFormat:l}=le();let{readColumns:s,fields:r}=o;const u=O(),{result:i}=L(oe),{state:a}=j(),{isReadBoxOpen:d}=a,[f,B]=v.useState([]);r&&(s=[...Re({fields:r,translate:u})]),v.useEffect(()=>{const t=[];s.map(n=>{const c=n.dataIndex,p=n.title,A=n.isDate||!1;let h=ee(i,c);h=A?w(h).format(l):h,t.push({propsKey:c,label:p,value:h})}),B(t)},[i]);const C=d?{display:"block",opacity:1}:{display:"none",opacity:0},m=f.map(t=>e.jsxs(Y,{gutter:12,children:[e.jsx(I,{className:"gutter-row",span:8,children:e.jsx("p",{children:t.label})}),e.jsx(I,{className:"gutter-row",span:2,children:e.jsx("p",{children:" : "})}),e.jsx(I,{className:"gutter-row",span:14,children:e.jsx("p",{children:t.value})})]},t.propsKey));return e.jsx("div",{style:C,children:m})}function Oe({config:o,onRerender:l}){let{entity:s,searchConfig:r}=o;const{displayLabels:u,searchFields:i,outputValue:a="id"}=r,d=R(),{crudContextAction:f}=j(),{panel:B,collapsedBox:C,readBox:m}=f,{result:t,isLoading:n,isSuccess:c}=L(Fe),[p,A]=v.useState([]),[h,Z]=v.useState(void 0),b=v.useRef(!1),[k,y]=v.useState(!1),[M,H]=v.useState(""),[K,U]=v.useState(""),[,V]=xe(()=>{U(M)},500,[M]),E=S=>u.map(g=>S[g]).join(" ");v.useEffect(()=>{if(K!=""){const S={q:K,fields:i};d(x.search({entity:s,options:S}))}return()=>{V()}},[K]);const z=S=>{S&&S!=""&&(b.current=!0,y(!0),A([]),Z(void 0),H(S))},J=S=>{const g=t.pageItems.find(D=>D[a]===S);d(x.currentItem({data:g})),B.open(),C.open(),m.open(),l()};return v.useEffect(()=>{b.current&&(c&&(t!=null&&t.pageItems)?A(t.pageItems):(y(!1),Z(void 0),A([])))},[c,t]),e.jsx(W,{loading:n,showSearch:!0,allowClear:!0,placeholder:e.jsx(re,{style:{float:"right",padding:"8px 0"}}),defaultActiveFirstOption:!1,filterOption:!1,notFoundContent:k?"... Đang tìm":e.jsx(fe,{}),value:h,onSearch:z,style:{width:"100%"},onSelect:J,children:p.map(S=>e.jsx(W.Option,{value:S[a],children:E(S)},S[a]))})}function He({config:o}){const[l,s]=v.useState([0]),r=()=>{s([l+1])};return l.map(u=>e.jsx(Oe,{config:o,onRerender:r},u))}function Ke({config:o}){const{crudContextAction:l}=j(),{collapsedBox:s,panel:r}=l,{ADD_NEW_ENTITY:u}=o,i=()=>{r.open(),s.close()};return e.jsx(F,{onClick:i,type:"primary",children:u})}function Ye({config:o,extra:l=[]}){let{entity:s,dataTableColumns:r,DATATABLE_TITLE:u,fields:i,searchConfig:a}=o;const{crudContextAction:d}=j(),{panel:f,collapsedBox:B,modal:C,readBox:m,editBox:t,advancedBox:n}=d,c=O(),{moneyFormatter:p}=Ce(),{dateFormat:A}=le(),h=[{label:c("Chi tiết"),key:"read",icon:e.jsx(se,{})},{label:c("Chỉnh sửa"),key:"edit",icon:e.jsx(X,{})},...l,{type:"divider"},{label:c("Xóa"),key:"delete",icon:e.jsx(ae,{})}],Z=g=>{E(x.currentItem({data:g})),f.open(),B.open(),m.open()};function b(g){E(x.currentItem({data:g})),E(x.currentAction({actionType:"update",data:g})),t.open(),f.open(),B.open()}function k(g){E(x.currentAction({actionType:"delete",data:g})),C.open()}function y(g){E(x.currentItem({data:g})),E(x.currentAction({actionType:"update",data:g})),n.open(),f.open(),B.open()}let M=[];i?M=[...Ne({fields:i,translate:c,moneyFormatter:p,dateFormat:A})]:M=[...r],r=[...M,{title:"",key:"action",fixed:"right",render:(g,D)=>e.jsx(Ae,{menu:{items:h,onClick:({key:_})=>{switch(_){case"read":Z(D);break;case"edit":b(D);break;case"delete":k(D);break;case"updatePassword":y(D);break}}},trigger:["click"],children:e.jsx(he,{style:{cursor:"pointer",fontSize:"24px"},onClick:_=>_.preventDefault()})})}];const{result:H,isLoading:K}=L(ke),{pagination:U,items:V}=H;console.log(U);const E=R(),z=v.useCallback(g=>{const D={page:g.current||1,items:g.pageSize||10};E(x.list({entity:s,options:D}))},[]),J=g=>{const D=g.target.value,_={q:D,fields:(a==null?void 0:a.searchFields)||""};E(x.list({entity:s,options:_})),console.log("search:"+D+JSON.stringify(_))},S=()=>{E(x.list({entity:s}))};return v.useEffect(()=>{const g=new AbortController;return S(),()=>{g.abort()}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Be,{onBack:()=>window.history.back(),backIcon:e.jsx(Se,{}),title:u,ghost:!1,extra:[e.jsx(ue,{onChange:J,placeholder:c("Tìm kiếm"),allowClear:!0},"searchFilterDataTable}"),e.jsx(F,{onClick:z,icon:e.jsx(de,{}),children:c("Làm mới")},`${q.generate()}`),e.jsx(Ke,{config:o},`${q.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(Ze,{columns:r,rowKey:g=>g.id,dataSource:V,pagination:U,loading:K,onChange:z,scroll:{x:!0}})]})}function Ue({children:o}){return e.jsx(ie,{children:o})}const ze=({onChange:o,title:l})=>e.jsx("div",{className:"collapseBoxHeader",onClick:o,children:l}),Ve=({isOpen:o,children:l})=>{const s=o?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{className:"TopCollapseBox",children:e.jsx("div",{style:s,children:e.jsx(Y,{children:e.jsxs(I,{span:24,children:[" ",l]})})})})},Je=({isOpen:o,children:l})=>{const s=o?{display:"none",opacity:0}:{display:"block",opacity:1};return e.jsx("div",{className:"BottomCollapseBox",children:e.jsx("div",{style:s,children:e.jsx(Y,{children:e.jsxs(I,{span:24,children:[" ",l]})})})})};function qe({topContent:o,bottomContent:l,buttonTitle:s,isCollapsed:r,onCollapse:u}){const i=r?"collapsed":"";return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{isOpen:r,children:o}),e.jsxs("div",{className:"collapseBox "+i,children:[e.jsx(ze,{title:s,onChange:u}),e.jsx("div",{className:"whiteBg"}),e.jsx(Je,{isOpen:r,children:l})]})]})}const{useBreakpoint:We}=De;function Qe({config:o,topContent:l,bottomContent:s,fixHeaderPanel:r}){We();const{ADD_NEW_ENTITY:u}=o,{state:i,crudContextAction:a}=j(),{isPanelClose:d,isBoxCollapsed:f}=i,{panel:B,collapsedBox:C}=a,[m,t]=v.useState(d),[n,c]=v.useState("-1px"),[p,A]=v.useState(0),[h,Z]=v.useState("20px");v.useEffect(()=>{let y=[];return d?(A(0),Z("20px"),y=setTimeout(()=>{c("-1px"),t(d)},200)):(t(d),c(0),y=setTimeout(()=>{A(1),Z(0)},200)),()=>clearTimeout(y)},[d]);const b=()=>{B.collapse()},k=()=>{C.collapse()};return e.jsx(ge,{title:o.PANEL_TITLE,placement:"right",onClose:b,open:!d,width:450,children:e.jsxs("div",{className:"sidePanelContent",style:{opacity:p,paddingTop:h},children:[r,e.jsx(qe,{buttonTitle:u,isCollapsed:f,onCollapse:k,topContent:l,bottomContent:s})]})})}const{Content:$e}=ce,Xe=({children:o})=>{const{state:l,crudContextAction:s}=j();$();const{isPanelClose:r}=l,[u,i]=v.useState(r);return v.useEffect(()=>{let a=[];return r?a=setTimeout(()=>{i(r)},200):i(r),()=>clearTimeout(a)},[r]),e.jsx($e,{className:"whiteBox shadow layoutPadding",style:{margin:"30px auto",width:"100%",maxWidth:"100%",flex:"none"},children:o})};function ea({children:o,config:l,sidePanelTopContent:s,sidePanelBottomContent:r,fixHeaderPanel:u}){return e.jsx(e.Fragment,{children:e.jsxs(Ue,{children:[e.jsx(Qe,{config:l,topContent:s,bottomContent:r,fixHeaderPanel:u}),e.jsxs(Xe,{children:[" ",o]})]})})}function aa({config:o,formElements:l,withUpload:s}){const r=O(),{crudContextAction:u,state:i}=j(),{deleteModalLabels:a}=o,{modal:d,editBox:f}=u,{isReadBoxOpen:B,isEditBoxOpen:C}=i,{result:m}=L(oe),t=R(),[n,c]=v.useState("");v.useEffect(()=>{if(m){const Z=a.map(b=>m[b]).join(" ");c(Z)}},[m]);const p=()=>{t(x.currentAction({actionType:"delete",data:m})),d.open()},A=()=>{t(x.currentAction({actionType:"update",data:m})),f.open()},h=B||C?{opacity:1}:{opacity:0};return e.jsxs(e.Fragment,{children:[e.jsxs(Y,{style:h,gutter:24,children:[e.jsx(I,{span:10,children:e.jsx("p",{style:{marginBottom:"10px"},children:n})}),e.jsxs(I,{span:14,children:[e.jsx(F,{onClick:p,type:"text",icon:e.jsx(ae,{}),size:"small",style:{float:"right",marginLeft:"5px",marginTop:"10px"},children:r("remove")}),e.jsx(F,{onClick:A,type:"text",icon:e.jsx(X,{}),size:"small",style:{float:"right",marginLeft:"0px",marginTop:"10px"},children:r("edit")})]}),e.jsx(I,{span:24,children:e.jsx("div",{className:"line"})}),e.jsx("div",{className:"space10"})]}),e.jsx(_e,{config:o}),e.jsx(we,{config:o,formElements:l,withUpload:s})]})}function la({config:o}){const{crudContextAction:l}=j(),{collapsedBox:s}=l,r=()=>{s.close()};return e.jsxs(Y,{gutter:8,children:[e.jsx(I,{className:"gutter-row",span:21,children:e.jsx(He,{config:o})}),e.jsx(I,{className:"gutter-row",span:3,children:e.jsx(F,{onClick:r,block:!0,icon:e.jsx(ye,{})})})]})}function Ca({config:o,createForm:l,updateForm:s,withUpload:r=!1}){const u=R();return v.useLayoutEffect(()=>{u(x.resetState())},[]),e.jsxs(ea,{config:o,fixHeaderPanel:e.jsx(la,{config:o}),sidePanelBottomContent:e.jsx(Le,{config:o,formElements:l,withUpload:r}),sidePanelTopContent:e.jsx(aa,{config:o,formElements:s,withUpload:r}),children:[e.jsx(Ye,{config:o}),e.jsx(Pe,{config:o})]})}export{Ca as C,je as a,Ge as c,le as u};
