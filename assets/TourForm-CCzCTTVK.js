import{ah as e,a as o}from"./index-DoO1pKsL.js";import{W as u,Q as s,ab as n,a9 as m,B as p,V as f}from"./IdurarOs-BcmAwRXL.js";import{S as c}from"./index-Ckf0y72T.js";import{T as d}from"./index-C_rTtv9W.js";import{U as C,a as y,s as x}from"./UploadOutlined-CCoOCGv6.js";import{P}from"./PlusOutlined-DhhQ1J65.js";const{TextArea:i}=m;function L({current:t=null,form:r=null}){return e.jsx(k,{current:t,form:r})}function k({current:t=null,form:r=null}){console.log(JSON.stringify(t));const[j,g]=o.useState([]),I=l=>{if(r!=null){const h=l.uid,a=r.getFieldValue("deleteImageIds")||[];r.setFieldsValue({deleteImageIds:[...a,h]})}};o.useEffect(()=>{var l;if(t!=null){const h=((l=t.tourImages)==null?void 0:l.map(a=>({uid:a.id,name:a.filePath.split("/").pop(),url:a.filePath,thumbUrl:a.filePath})))||[];g(h),r.setFieldsValue({deleteImageIds:[]})}},[t,r]);const b=l=>(l.type==="image/jpeg"||l.type==="image/png"||x.error("Bạn chỉ có thể tải lên tệp JPG/PNG!"),l.size/1024/1024<5||x.error("Ảnh phải nhỏ hơn 5MB!"),!1);return e.jsxs(e.Fragment,{children:[e.jsxs(u,{gutter:[12,0],children:[e.jsx(s,{span:8,children:e.jsx(n.Item,{name:"isActive",label:"Trạng thái",valuePropName:"checked",children:e.jsx(c,{checkedChildren:"Hoạt động",unCheckedChildren:"Đóng"})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"tourName",label:"Tên tour",rules:[{required:!0,message:"Vui lòng nhập tên tour"}],children:e.jsx(m,{})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"shortDescription",label:"Mô tả ngắn",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"longDescription",label:"Mô tả chi tiết",children:e.jsx(i,{rows:4})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:"originalPrice",label:"Giá gốc",rules:[{required:!0,message:"Vui lòng nhập giá gốc"}],children:e.jsx(d,{style:{width:"100%"},formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:l=>l.replace(/\./g,""),suffix:"VND",min:0})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:"discountPrice",label:"Giá giảm",children:e.jsx(d,{style:{width:"100%"},formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:l=>l.replace(/\./g,""),suffix:"VND",min:0})})}),e.jsx(s,{span:8,children:e.jsx(n.Item,{name:"duration",label:"Thời lượng (giờ)",rules:[{required:!0,type:"number",message:"Vui lòng nhập thời lượng"}],children:e.jsx(d,{min:1})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:"isRefundable",label:"Hoàn tiền",valuePropName:"checked",children:e.jsx(c,{checkedChildren:"Có",unCheckedChildren:"Không"})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:"isCancelable",label:"Hủy tour",valuePropName:"checked",children:e.jsx(c,{checkedChildren:"Có",unCheckedChildren:"Không"})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:"reschedulable",label:"Có thể dời lịch",valuePropName:"checked",children:e.jsx(c,{checkedChildren:"Có",unCheckedChildren:"Không"})})}),e.jsx(s,{span:6,children:e.jsx(n.Item,{name:"cancellationDeadlineHours",label:"Giờ hết hạn hủy",rules:[{type:"number",min:0,message:"Vui lòng nhập số giờ hợp lệ"}],children:e.jsx(d,{min:0})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"voucherValidity",label:"Hiệu lực voucher",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"redemptionMethod",label:"Phương thức nhận ưu đãi",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"cancellationPolicyDescription",label:"Mô tả chính sách hủy bỏ",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"refundPolicy",label:"Chính sách hoàn tiền",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"reschedulePolicy",label:"Chính sách dời lịch",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"termsAndConditions",label:"Điều khoản và điều kiện",children:e.jsx(i,{rows:2})})}),e.jsx(s,{span:24,children:e.jsx(n.Item,{name:"files",label:"Ảnh",valuePropName:"imageList",getValueFromEvent:l=>l.fileList.map(h=>h.originFileObj),children:e.jsx(C,{beforeUpload:b,listType:"picture",accept:"image/png, image/jpeg",maxCount:10,multiple:!0,onRemove:I,defaultFileList:j,children:e.jsx(p,{icon:e.jsx(y,{}),children:"Chọn để tải ảnh"})})})}),e.jsx(n.Item,{name:"deleteImageIds",initialValue:[],children:e.jsx(m,{type:"hidden"})})]}),e.jsx(f,{dashed:!0}),e.jsx(u,{gutter:[12,-5],children:e.jsx(s,{span:5,children:e.jsx(n.Item,{children:e.jsx(p,{type:"primary",htmlType:"submit",icon:e.jsx(P,{}),block:!0,children:"Lưu"})})})})]})}export{L as T};
